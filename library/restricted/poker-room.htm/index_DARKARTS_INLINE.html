<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<title>The Restricted Stacks</title>
<meta content="width=device-width, initial-scale=1" name="viewport">
<style>
    :root{ --ink:#e5e7eb; --muted:#9ca3af; }
    html,body{height:100%}
    body{
      margin:0; background:#0b0b0f; color:var(--ink);
      font-family:system-ui, Segoe UI, Roboto, Arial, sans-serif;
      display:grid; place-items:center;
    }
    .room{ width:min(900px,92vw); padding:28px; text-align:center }
    h1{ font-size:clamp(22px,4.2vw,34px); margin:0 0 6px }
    p{ color:var(--muted); margin:0 0 18px }

    /* ‚Äústone‚Äù backdrop + candle glow */
    .stage{
      position:relative; border-radius:18px; overflow:hidden;
      background:
        radial-gradient(1200px 400px at 50% -10%, rgba(255,220,140,.10), transparent 60%),
        repeating-linear-gradient(45deg,#0e0e12 0 22px,#0b0b0f 22px 44px);
      border:1px solid #18181b; box-shadow: 0 30px 80px rgba(0,0,0,.45);
      padding:26px;
    }
    .table{ margin:20px auto 8px; width:min(680px,90%); height:10px;
            background:linear-gradient(#1f2937,#0f172a); border-radius:10px; box-shadow:0 20px 40px rgba(0,0,0,.5)}
    #dark-arts-entry img {
	transition: transform 0.3s ease, box-shadow 0.3s ease;
	}

	#dark-arts-entry img:hover {
	transform: scale(1.05);
	box-shadow: 0 0 25px rgba(173, 216, 230, 0.7);
	}

    @keyframes appear{ to{ opacity:.85; transform:scale(1.04); } }
    @keyframes vanish{ to{ opacity:0; transform:scale(1.0); } }

    .actions{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:8px }
    .btn{ display:inline-block; padding:10px 14px; border-radius:999px; text-decoration:none;
          border:1px solid #374151; color:var(--ink); background:#0f172a }
    .btn.link{ background:transparent }
    .hint{ font-size:12px; color:var(--muted); margin-top:10px }
    /* optional Bramble art (auto-hides if missing) */
    .bramble{ position:absolute; bottom:0; left:0; width:min(34%,360px); filter:drop-shadow(0 8px 18px rgba(0,0,0,.6)); }
  </style>
</meta><style>
/* === Dark Arts Poker inline scene === */
.poker-scene{ position:relative; display:inline-block; width:min(1100px,96vw); border-radius:16px; overflow:hidden; box-shadow:0 30px 80px rgba(0,0,0,.45); border:1px solid #18181b; }
.poker-image{ display:block; width:100%; height:auto; }
.hotspot{ position:absolute; background:transparent; border:0; padding:0; margin:0; cursor:pointer; width:7%; height:10%; z-index:1; }
.balloon{ position:absolute; display:none; max-width:280px; background:rgba(255,255,255,.95); color:#111; border:2px solid #222; border-radius:12px; padding:10px 12px; font:500 16px/1.25 Georgia,serif; box-shadow:0 6px 18px rgba(0,0,0,.18); opacity:0; transition:opacity .2s ease; z-index:2; }
.balloon .tail{ position:absolute; width:0; height:0; bottom:-12px; left:26%; border-left:10px solid transparent; border-right:10px solid transparent; border-top:12px solid rgba(255,255,255,.95); filter: drop-shadow(0 2px 0 #222); }

/* Positions */
.poe-hotspot    { top:18%; left:53%; width:10%; height:15%; }
.poe-balloon    { top:10%; left:47%; }

.crow-hotspot   { top:34%; left:44%; }
.crow-balloon   { top:26%; left:37%; }

.wolf-hotspot   { top:47%; left:40%; }
.wolf-balloon   { top:39%; left:34%; }

.donkey-hotspot { top:50%; left:72%; }
.donkey-balloon { top:42%; left:66%; }

.sheep-hotspot  { top:46%; left:52%; }
.sheep-balloon  { top:38%; left:46%; }

.squirrel-hotspot { top:63%; left:86%; width:6%; height:12%; }
.squirrel-balloon { top:50%; left:76%; }

/* Dog */
.dog-hotspot{ top:62%; left:58%; width:7%; height:12%; }
.dog-balloon{ top:54%; left:44%; width:220px; text-align:center; }
.dog-balloon .tail{ left:30%; }

/* Hover wins on desktop */
.hotspot:hover + .balloon{ display:block !important; opacity:1 !important; }
</style><style>/* To hide the panorama below, uncomment: .pano{display:none!important;} */</style></head>
<body>
<div class="room">
<h1>üïØÔ∏è The Dark Arts Chamber</h1>
<p>Ravens whisper in the rafters. The candles listen. Speak softly.</p>
<section id="dark-arts-entry"><h2>Dark Arts Chamber</h2><div class="poker-scene"><img alt="Dark Arts Poker Room" class="poker-image" src="../assets/img/dark-arts-poker.png"/><button aria-label="Poe" class="hotspot poe-hotspot"></button><div class="balloon poe-balloon" role="tooltip">This Chamber has Poe-tential.<span class="tail"></span></div><button aria-label="Crow" class="hotspot crow-hotspot"></button><div class="balloon crow-balloon" role="tooltip">Play fair. We don‚Äôt want anybody eating crow.<span class="tail"></span></div><button aria-label="Wolf" class="hotspot wolf-hotspot"></button><div class="balloon wolf-balloon" role="tooltip">Hey Donk‚Ä¶ I know what you have‚Ä¶<span class="tail"></span></div><button aria-label="Donkey" class="hotspot donkey-hotspot"></button><div class="balloon donkey-balloon" role="tooltip">Assuming makes an Ass out of U and Me.<span class="tail"></span></div><button aria-label="Sheep" class="hotspot sheep-hotspot"></button><div class="balloon sheep-balloon" role="tooltip">I don‚Äôt give a lamb.<span class="tail"></span></div><button aria-label="Squirrel" class="hotspot squirrel-hotspot"></button><div class="balloon squirrel-balloon" role="tooltip">Look at the size of my nuts‚Ä¶<span class="tail"></span></div><button aria-label="Dog" class="hotspot dog-hotspot"></button><div class="balloon dog-balloon" role="tooltip">Woof hand. I‚Äôm Tarot-fied. I fold. A‚ô† A‚ô£ A‚ô• 8‚ô† 8‚ô£<span class="tail"></span></div></div></section>
<!-- Panorama Look-Around (no libraries) -->
<div aria-label="Look around the chamber" class="pano" id="pano"></div>
<style>
  .pano{
    width:min(980px,94vw);
    height:420px;
    margin:20px auto;
    border-radius:16px;
    overflow:hidden;
    border:1px solid #18181b;
    box-shadow:0 30px 80px rgba(0,0,0,.45);
    background:#0b0b0f url("../assets/img/room-panorama.jpg") center/auto 100% repeat-x;
    /* Trick: repeat-x lets us wrap around seamlessly if the image edges match */
    cursor:grab;
    position:relative;
  }
  .pano:active{ cursor:grabbing; }
  /* Optional vignette for mood */
  .pano::after{
    content:"";
    position:absolute;inset:0;
    background:radial-gradient(120% 80% at 50% 50%, transparent, rgba(0,0,0,.35) 65%, rgba(0,0,0,.6));
    pointer-events:none;
  }
</style>
<script>
(function(){
  const el = document.getElementById('pano');
  // state
  let dragging = false, lastX = 0, bgX = 50; // percent along the image
  let velocity = 0, raf = null;

  // helpers
  function setPos(p){ 
    bgX = (p % 100 + 100) % 100; // wrap 0-100
    el.style.backgroundPosition = `${bgX}% 50%`;
  }

  // mouse move-to-look (hover pan)
  el.addEventListener('mousemove', e => {
    if (dragging) return; // dragging uses different logic
    const rect = el.getBoundingClientRect();
    const pct = ((e.clientX - rect.left) / rect.width) * 100;
    setPos(pct);
  });

  // drag to spin with inertia
  function onDown(e){
    dragging = true;
    lastX = ('touches' in e) ? e.touches[0].clientX : e.clientX;
    velocity = 0;
    cancelAnimationFrame(raf);
  }
  function onMove(e){
    if(!dragging) return;
    const x = ('touches' in e) ? e.touches[0].clientX : e.clientX;
    const dx = x - lastX;
    lastX = x;
    // dx -> percentage shift; tune 0.08 for sensitivity
    const deltaPct = dx * 0.08;
    setPos(bgX - deltaPct);
    velocity = deltaPct; // store last movement for inertia
  }
  function onUp(){
    if(!dragging) return;
    dragging = false;
    // inertia
    const decay = 0.95;
    function spin(){
      if (Math.abs(velocity) < 0.02) return;
      setPos(bgX - velocity);
      velocity *= decay;
      raf = requestAnimationFrame(spin);
    }
    raf = requestAnimationFrame(spin);
  }

  el.addEventListener('mousedown', onDown);
  window.addEventListener('mousemove', onMove);
  window.addEventListener('mouseup', onUp);

  // touch support
  el.addEventListener('touchstart', onDown, {passive:true});
  el.addEventListener('touchmove', onMove,   {passive:true});
  el.addEventListener('touchend', onUp);

  // start centered
  setPos(50);
})();
</script>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Poe-try Wall ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<style>
  .poetry {
    margin: 14px auto 0; width:min(720px,92%); text-align:center;
    border:1px solid #1f2937; border-radius:14px; padding:14px 16px;
    background:linear-gradient(180deg,#0f1320,#0b0b0f 60%);
    box-shadow: inset 0 0 40px rgba(0,0,0,.35);
  }
  .poe-title { display:flex; align-items:center; gap:8px; justify-content:center;
    font-weight:700; letter-spacing:.04em; color:#cbd5e1; margin:0 0 6px; font-size:14px; text-transform:uppercase;}
  .poe-title .raven { filter:grayscale(1) contrast(1.2); font-size:16px }
  .poe-line {
    min-height:2.6em; line-height:1.3; font-size:clamp(16px,2.4vw,20px);
    color:#e5e7eb; opacity:0; transition:opacity .6s ease;
  }
  .poe-line.show { opacity:1 }
  .poe-credits { color:#94a3b8; font-size:12px; margin-top:6px }
  .poe-actions { margin-top:8px; display:flex; gap:8px; justify-content:center; flex-wrap:wrap }
  .btn-ghost {
    background:transparent; color:#e5e7eb; border:1px solid #374151;
    border-radius:999px; padding:6px 10px; cursor:pointer;
  }
</style>
<div aria-live="polite" class="poetry" id="poeWall">
<div class="poe-title"><span class="raven">üê¶‚Äç‚¨õ</span> Poe-try Wall</div>
<div class="poe-line" id="poeLine"></div>
<div class="poe-actions">
<button class="btn-ghost" id="poePrev" type="button">‚óÄÔ∏é Back</button>
<button class="btn-ghost" id="poePause" type="button">Nevermore (pause)</button>
<button class="btn-ghost" id="poeNext" type="button">Next ‚ñ∂Ô∏é</button>
</div>
<div class="poe-credits">Lines inspired by Edgar Allan Poe (public domain).</div>
</div>
<div class="actions">
<a class="btn link" href="wit-worth-stealing/poker-night.html">üé≠ Wit Worth Stealing</a>
</div>
<script>
  (function(){
    // Public-domain Poe snippets & nods (short for kid-friendly vibes)
    const LINES = [
      "Once upon a midnight dreary, while I pondered, weak and weary‚Äî",
      "And the silken, sad, uncertain rustling of each purple curtain‚Ä¶",
      "Deep into that darkness peering, long I stood there wondering, fearing‚Äî",
      "Quoth the Raven‚Äî‚ÄúNevermore.‚Äù",
      "All that we see or seem is but a dream within a dream.",
      "And the stars never rise but I feel the bright eyes‚Ä¶",
      "From childhood‚Äôs hour I have not been as others were‚Ä¶",
      "Is all that we see or seem but a dream within a dream?"
    ];

    const el = document.getElementById('poeLine');
    const prev = document.getElementById('poePrev');
    const next = document.getElementById('poeNext');
    const pauseBtn = document.getElementById('poePause');

    let i = 0, paused = false, timer = null, dwell = 4200;

    function show(idx){
      i = (idx + LINES.length) % LINES.length;
      el.classList.remove('show');
      // small delay so fade works
      setTimeout(()=>{ el.textContent = LINES[i]; el.classList.add('show'); }, 60);
    }

    function schedule(){
      clearTimeout(timer);
      if(paused) return;
      timer = setTimeout(()=>{ show(i+1); schedule(); }, dwell);
    }

    prev.addEventListener('click', ()=>{ paused=false; pauseBtn.textContent='Nevermore (pause)'; show(i-1); schedule(); });
    next.addEventListener('click', ()=>{ paused=false; pauseBtn.textContent='Nevermore (pause)'; show(i+1); schedule(); });
    pauseBtn.addEventListener('click', ()=>{
      paused = !paused;
      pauseBtn.textContent = paused ? 'Resume' : 'Nevermore (pause)';
      if(!paused) schedule(); else clearTimeout(timer);
    });

    // Kick off
    show(i); schedule();
  })();
</script>
<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="actions">
<a class="btn" href="forbidden/index.html">üìú Enter the Forbidden Scrolls</a>
<a class="btn link" href="philosophy/index.html">‚öñÔ∏è Philosophy</a>
<a class="btn link" href="../index.html">‚Ü©Ô∏é Back to Library</a>
</div>
<div class="hint">The face appears only for those who stare too long.</div>
</div>

<style>
/* Restore hover functionality for balloons, override inline display:none */
.hotspot:hover + .balloon {
  display: block !important;
  opacity: 1 !important;
}
</style>
<script>
(() => {
  // Enable click toggle only for touch devices, keep hover for desktop
  const isTouch = window.matchMedia('(hover: none), (pointer: coarse)').matches;
  if (!isTouch) return;

  const scene = document.querySelector('.poker-scene');
  if (!scene) return;
  const hotspots = [...scene.querySelectorAll('.hotspot')];

  function closeAll() {
    scene.querySelectorAll('.balloon').forEach(b => {
      b.style.display = 'none';
      b.style.opacity = 0;
    });
    hotspots.forEach(h => h.setAttribute('aria-expanded','false'));
  }

  hotspots.forEach(h => {
    h.setAttribute('aria-expanded','false');
    h.addEventListener('click', e => {
      e.preventDefault();
      const balloon = h.nextElementSibling;
      if (!balloon || !balloon.classList.contains('balloon')) return;
      const isOpen = balloon.style.display === 'block';
      closeAll();
      if (!isOpen) {
        balloon.style.display = 'block';
        requestAnimationFrame(() => { balloon.style.opacity = 1; });
        h.setAttribute('aria-expanded','true');
      }
    });
  });

  document.addEventListener('click', e => {
    if (!scene.contains(e.target)) closeAll();
  });

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') closeAll();
  });
})();
</script>
<script>
(() => {
  const isTouch = window.matchMedia('(hover: none), (pointer: coarse)').matches;
  if (!isTouch) return;
  const scene = document.querySelector('.poker-scene');
  if (!scene) return;
  const hotspots = [...scene.querySelectorAll('.hotspot')];
  function closeAll(){
    scene.querySelectorAll('.balloon').forEach(b => { b.style.display='none'; b.style.opacity=0; });
    hotspots.forEach(h => h.setAttribute('aria-expanded','false'));
  }
  hotspots.forEach(h => {
    h.setAttribute('aria-expanded','false');
    h.addEventListener('click', e => {
      e.preventDefault();
      const b = h.nextElementSibling;
      if(!b || !b.classList.contains('balloon')) return;
      const open = b.style.display === 'block';
      closeAll();
      if(!open){ b.style.display='block'; requestAnimationFrame(()=>{ b.style.opacity=1; }); h.setAttribute('aria-expanded','true'); }
    });
  });
  document.addEventListener('click', e => { if(!scene.contains(e.target)) closeAll(); });
  document.addEventListener('keydown', e => { if(e.key==='Escape') closeAll(); });
})();
</script></body>
</html>
